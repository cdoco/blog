<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Life is strange"><title>lnmp 环境搭建 | C &amp; Fish</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">lnmp 环境搭建</h1><a id="logo" href="/.">C &amp; Fish</a><p class="description">Life is strange</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">lnmp 环境搭建</h1><div class="post-meta">Feb 20, 2016<span> | </span><span class="category"><a href="/categories/php/">php</a></span></div><div class="post-content"><h2 id="编译nginx"><a href="#编译nginx" class="headerlink" title="编译nginx"></a>编译nginx</h2><h3 id="编译zlib，下载地址-zlib"><a href="#编译zlib，下载地址-zlib" class="headerlink" title="编译zlib，下载地址 zlib"></a>编译zlib，下载地址 <a href="http://www.zlib.net/" target="_blank" rel="external">zlib</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar xvf zlib-1.2.8.tar.gz</div><div class="line">./configure --static --prefix=/opt/<span class="built_in">source</span>/libs/zlib</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="编译openssl，下载地址-openssl"><a href="#编译openssl，下载地址-openssl" class="headerlink" title="编译openssl，下载地址 openssl"></a>编译openssl，下载地址 <a href="http://www.openssl.org/" target="_blank" rel="external">openssl</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar xvf openssl-0.9.8zb.tar.gz</div><div class="line">./config --prefix=/opt/<span class="built_in">source</span>/libs/openssl -L/opt/<span class="built_in">source</span>/libs/zlib/lib -I/opt/<span class="built_in">source</span>/libs/zlib/include threads zlib <span class="built_in">enable</span>-static-engine</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<h3 id="编译pcre，下载地址-pcre"><a href="#编译pcre，下载地址-pcre" class="headerlink" title="编译pcre，下载地址 pcre"></a>编译pcre，下载地址 <a href="http://www.pcre.org/" target="_blank" rel="external">pcre</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar xvf pcre-8.33.tar.gz</div><div class="line">./configure --prefix=/opt/<span class="built_in">source</span>/libs/pcre</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<h3 id="编译nginx，下载地址-nginx"><a href="#编译nginx，下载地址-nginx" class="headerlink" title="编译nginx，下载地址 nginx"></a>编译nginx，下载地址 <a href="http://nginx.org/en/download.html" target="_blank" rel="external">nginx</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">tar xvf nginx-1.9.1.tar.gz</div><div class="line"><span class="string">'./configure'</span> \</div><div class="line"><span class="string">'--prefix=/opt/source/nginx'</span> \</div><div class="line"><span class="string">'--with-debug'</span> \</div><div class="line"><span class="string">'--with-openssl=/opt/data/openssl-0.9.8zb'</span> \</div><div class="line"><span class="string">'--with-zlib=/opt/data/zlib-1.2.8'</span> \</div><div class="line"><span class="string">'--with-pcre=/opt/data/pcre-8.33'</span> \</div><div class="line"><span class="string">'--with-http_stub_status_module'</span> \</div><div class="line"><span class="string">'--with-http_gzip_static_module'</span> \</div><div class="line"><span class="string">"<span class="variable">$@</span>"</span></div><div class="line">make</div><div class="line">make install</div><div class="line"></div><div class="line">ps：--with-openssl --with-zlib --with-pcre这3个路径是他们对应的源码路径</div></pre></td></tr></table></figure>
<p>生成的nginx在/opt/source/nginx/sbin下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">./nginx --运行程序</div><div class="line">在地址栏输入:  http://localhost 出现nginx logo，说明正确安装了</div></pre></td></tr></table></figure>
<h2 id="编译php-centos"><a href="#编译php-centos" class="headerlink" title="编译php (centos)"></a>编译php (centos)</h2><h3 id="安装php依赖的运行库"><a href="#安装php依赖的运行库" class="headerlink" title="安装php依赖的运行库"></a>安装php依赖的运行库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">yum install libjpeg.x86_64 \</div><div class="line">libpng.x86_64 \</div><div class="line">freetype.x86_64 \</div><div class="line">libjpeg-devel.x86_64 \</div><div class="line">libpng-devel.x86_64 \</div><div class="line">freetype-devel.x86_64 \</div><div class="line">libcurl-devel \</div><div class="line">libxml2-devel \</div><div class="line">libjpeg-turbo \</div><div class="line">libjpeg-turbo-devel \</div><div class="line">libXpm-devel \</div><div class="line">libXpm \</div><div class="line">libicu-devel \</div><div class="line">libmcrypt</div><div class="line">libmcrypt-devel \</div><div class="line">libxslt-devel \</div><div class="line">libxslt -y</div></pre></td></tr></table></figure>
<h3 id="下载php源码-amp-amp-编译-，下载地址-php"><a href="#下载php源码-amp-amp-编译-，下载地址-php" class="headerlink" title="下载php源码 &amp;&amp; 编译 ，下载地址 php"></a>下载php源码 &amp;&amp; 编译 ，下载地址 <a href="http://php.net/downloads.php" target="_blank" rel="external">php</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="string">'./configure'</span> \</div><div class="line"><span class="string">'--prefix=/opt/source/php/'</span> \</div><div class="line"><span class="string">'--with-config-file-path=/opt/source/php/etc/'</span> \</div><div class="line"><span class="string">'--with-config-file-scan-dir=/opt/source/php/conf.d/'</span> \</div><div class="line"><span class="string">'--enable-fpm'</span> \</div><div class="line"><span class="string">'--enable-cgi'</span> \</div><div class="line"><span class="string">'--disable-phpdbg'</span> \</div><div class="line"><span class="string">'--disable-jsond'</span> \</div><div class="line"><span class="string">'--enable-mbstring'</span> \</div><div class="line"><span class="string">'--enable-calendar'</span> \</div><div class="line"><span class="string">'--with-xsl'</span> \</div><div class="line"><span class="string">'--with-openssl'</span> \</div><div class="line"><span class="string">'--enable-soap'</span> \</div><div class="line"><span class="string">'--enable-zip'</span> \</div><div class="line"><span class="string">'--enable-shmop'</span> \</div><div class="line"><span class="string">'--enable-sockets'</span> \</div><div class="line"><span class="string">'--with-gd'</span> \</div><div class="line"><span class="string">'--with-jpeg-dir'</span> \</div><div class="line"><span class="string">'--with-png-dir'</span> \</div><div class="line"><span class="string">'--with-xpm-dir'</span> \</div><div class="line"><span class="string">'--with-xmlrpc'</span> \</div><div class="line"><span class="string">'--enable-pcntl'</span> \</div><div class="line"><span class="string">'--enable-intl'</span> \</div><div class="line"><span class="string">'--with-mcrypt'</span> \</div><div class="line"><span class="string">'--enable-sysvsem'</span> \</div><div class="line"><span class="string">'--enable-sysvshm'</span> \</div><div class="line"><span class="string">'--enable-sysvmsg'</span> \</div><div class="line"><span class="string">'--enable-opcache'</span> \</div><div class="line"><span class="string">'--with-iconv'</span> \</div><div class="line"><span class="string">'--with-bz2'</span> \</div><div class="line"><span class="string">'--with-curl'</span> \</div><div class="line"><span class="string">'--enable-mysqlnd'</span> \</div><div class="line"><span class="string">'--with-mysql=mysqlnd'</span> \</div><div class="line"><span class="string">'--with-mysqli=mysqlnd'</span> \</div><div class="line"><span class="string">'--with-pdo-mysql=mysqlnd'</span> \</div><div class="line"><span class="string">'--with-zlib'</span> \</div><div class="line"><span class="string">'--with-gettext='</span> \</div><div class="line"><span class="string">"<span class="variable">$@</span>"</span></div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<p>ps：这里参数比较多，可以根据自己的需要删除一些</p>
<p>然后需要把php.ini 复制到/opt/source/php/etc/ 目录下面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp /opt/data/php-src/php.ini-development /opt/<span class="built_in">source</span>/php/etc/php.ini</div></pre></td></tr></table></figure>
<p>生成的php-fpm 在/opt/source/php/sbin 目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">./php-fpm --运行fpm 默认端口是 9000</div><div class="line"></div><div class="line">ps aux |grep php --如果看到fpm master进程，说明安装成功了</div></pre></td></tr></table></figure>
<p>pa：如果安装过程出现问题，请参照 <a href="https://github.com/cdoco/cdoco.github.io/blob/master/md/php-faq.md" target="_blank" rel="external">编译php常见问题</a></p>
<h3 id="nginx-配置"><a href="#nginx-配置" class="headerlink" title="nginx 配置"></a>nginx 配置</h3><p>编辑nginx.conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /opt/<span class="built_in">source</span>/nginx/conf/nginx.conf</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#user  nobody;</span></div><div class="line">worker_processes  1;</div><div class="line"></div><div class="line">error_log  logs/error.log;</div><div class="line"><span class="comment">#error_log  logs/error.log  notice;</span></div><div class="line"><span class="comment">#error_log  logs/error.log  info;</span></div><div class="line"></div><div class="line"><span class="comment">#pid        logs/nginx.pid;</span></div><div class="line"></div><div class="line">events &#123;</div><div class="line">    worker_connections  1024;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># load modules compiled as Dynamic Shared Object (DSO)</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#dso &#123;</span></div><div class="line"><span class="comment">#    load ngx_http_fastcgi_module.so;</span></div><div class="line"><span class="comment">#    load ngx_http_rewrite_module.so;</span></div><div class="line"><span class="comment">#&#125;</span></div><div class="line"></div><div class="line">http &#123;</div><div class="line">    include       mime.types;</div><div class="line">    default_type  application/octet-stream;</div><div class="line"></div><div class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></div><div class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></div><div class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</div><div class="line"></div><div class="line">    <span class="comment">#access_log  logs/access.log  main;</span></div><div class="line"></div><div class="line">    sendfile        off;</div><div class="line">    <span class="comment">#tcp_nopush     on;</span></div><div class="line"></div><div class="line">    <span class="comment">#keepalive_timeout  0;</span></div><div class="line">    keepalive_timeout  65;</div><div class="line"></div><div class="line">    gzip  on;</div><div class="line">    gzip_min_length 1k;</div><div class="line">    gzip_buffers    16 64k;</div><div class="line">    gzip_http_version 1.1;</div><div class="line">    gzip_disable <span class="string">"MSIE [1-6]."</span>;</div><div class="line">    gzip_comp_level 7;</div><div class="line">    gzip_types text/plain application/xml text/css application/x-javascript;</div><div class="line">    gzip_vary on;</div><div class="line"></div><div class="line">    include /opt/<span class="built_in">source</span>/nginx/conf/vhost/*.conf;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>创建vhost文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir /opt/<span class="built_in">source</span>/nginx/conf/vhost</div><div class="line"><span class="built_in">cd</span> /opt/<span class="built_in">source</span>/nginx/conf/vhost</div><div class="line">touch default.conf &amp;&amp; vim default.conf</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">server&#123;</div><div class="line">    listen       *:80 default;</div><div class="line">    root    /opt/<span class="built_in">source</span>/www;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!-e <span class="variable">$request_filename</span>) &#123;  </div><div class="line">        rewrite ^/(.*) /index.php?<span class="variable">$1</span> last;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location ~ .*\.(css|less|scss|js|coffee|gif|jpg|jpeg|png|bmp|swf)$ &#123;</div><div class="line">        access_log off;</div><div class="line">        expires 1d;</div><div class="line">        <span class="built_in">break</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location ~ .* &#123;  </div><div class="line">            fastcgi_pass   127.0.0.1:9000;</div><div class="line">            fastcgi_index  index.php;</div><div class="line">            fastcgi_param  SCRIPT_FILENAME  /opt/<span class="built_in">source</span>/www<span class="variable">$fastcgi_script_name</span>;</div><div class="line">            include        fastcgi_params;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后 建一个index.php测试文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /opt/<span class="built_in">source</span>/www</div><div class="line">touch index.php &amp;&amp; vim index.php</div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span> phpinfo();<span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>重启nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/opt/<span class="built_in">source</span>/nginx/sbin/nginx -s reload --重启nginx</div><div class="line">在地址栏输入:  http://localhost 出现phpinfo，说明正确安装了</div></pre></td></tr></table></figure>
<h2 id="编译mysql"><a href="#编译mysql" class="headerlink" title="编译mysql"></a>编译mysql</h2><h3 id="下载mysql源代码包，到mysql下载页面选择MYSQL-Community-Serve-Source-Code-版本"><a href="#下载mysql源代码包，到mysql下载页面选择MYSQL-Community-Serve-Source-Code-版本" class="headerlink" title="下载mysql源代码包，到mysql下载页面选择MYSQL Community Serve Source Code 版本"></a>下载mysql源代码包，到mysql下载页面选择MYSQL Community Serve Source Code 版本</h3><h3 id="安装-bison，下载地址-bison"><a href="#安装-bison，下载地址-bison" class="headerlink" title="安装 bison，下载地址 bison"></a>安装 bison，下载地址 <a href="http://www.gnu.org/software/bison/" target="_blank" rel="external">bison</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar zxvf bison-2.5.tar.gz  </div><div class="line"><span class="built_in">cd</span> bison-2.5</div><div class="line">./configure</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<h3 id="安装ncurses，下载地址-ncurses"><a href="#安装ncurses，下载地址-ncurses" class="headerlink" title="安装ncurses，下载地址 ncurses"></a>安装ncurses，下载地址 <a href="http://www.gnu.org/software/ncurses/" target="_blank" rel="external">ncurses</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar zxvf ncurses-5.8.tar.gz  </div><div class="line"><span class="built_in">cd</span> ncurses-5.8  </div><div class="line">./configure  </div><div class="line">make  </div><div class="line">make install</div></pre></td></tr></table></figure>
<h3 id="添加mysql用户与组"><a href="#添加mysql用户与组" class="headerlink" title="添加mysql用户与组"></a>添加mysql用户与组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">groupadd mysql</div><div class="line">useradd -g mysql -s /sbin/nologin -M mysql</div></pre></td></tr></table></figure>
<h3 id="源码编译mysql"><a href="#源码编译mysql" class="headerlink" title="源码编译mysql"></a>源码编译mysql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">tar zxvf mysql-5.5.13.tar.gz</div><div class="line"><span class="built_in">cd</span> mysql-5.5.13</div><div class="line">rm CMakeCache.txt</div><div class="line">cmake . -DCMAKE_INSTALL_PREFIX=/opt/<span class="built_in">source</span>/mysql/  \</div><div class="line">-DMYSQL_DATADIR=/opt/<span class="built_in">source</span>/mysql/data  \</div><div class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1  \</div><div class="line">-DMYSQL_TCP_PORT=3306  \</div><div class="line">-DMYSQL_UNIX_ADDR=/opt/<span class="built_in">source</span>/mysql/data/mysql.sock  \</div><div class="line">-DMYSQL_USER=mysql  \</div><div class="line">-DWITH_DEBUG=0</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<h3 id="编译完成后，安装数据库"><a href="#编译完成后，安装数据库" class="headerlink" title="编译完成后，安装数据库"></a>编译完成后，安装数据库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /opt/<span class="built_in">source</span>/mysql</div><div class="line">chown -R mysql .</div><div class="line">chgrp -R mysql .</div><div class="line">scripts/mysql_install_db --user=mysql --basedir=/opt/<span class="built_in">source</span>/mysql --datadir=/opt/<span class="built_in">source</span>/mysql/data</div><div class="line">chown -R root .</div><div class="line">chown -R mysql ./data</div></pre></td></tr></table></figure>
<h3 id="可选的命令，将mysql的配置文件拷贝到-etc"><a href="#可选的命令，将mysql的配置文件拷贝到-etc" class="headerlink" title="可选的命令，将mysql的配置文件拷贝到/etc"></a>可选的命令，将mysql的配置文件拷贝到/etc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cp support-files/my-medium.cnf /etc/my.cnf</div><div class="line">ps：如果原来的/etc目录下有my.cnf文件，则一定要用编译安装的my.cnf替换掉系统默认的my..cnf。否则会报错</div></pre></td></tr></table></figure>
<h3 id="启动mysql"><a href="#启动mysql" class="headerlink" title="启动mysql"></a>启动mysql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">bin/mysqld_safe --user=mysql &amp;</div><div class="line"><span class="comment">#启动mysql，看是否成功</span></div><div class="line">netstat -tnl|grep 3306</div><div class="line">或者</div><div class="line">ps -aux|grep <span class="string">'mysql'</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">可选步骤：设置root 密码：</div><div class="line">/opt/<span class="built_in">source</span>/mysql/bin/mysqladmin -u root password <span class="string">'new-password'</span></div><div class="line">/opt/<span class="built_in">source</span>/mysql/bin/mysqladmin -u root -h localhost.localdomain password <span class="string">'new-password'</span></div></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/php/">php</a><a href="/tags/lnmp/">lnmp</a><a href="/tags/linux/">linux</a><a href="/tags/mysql/">mysql</a><a href="/tags/nginx/">nginx</a></div><div class="post-nav"><a href="/2016/02/21/xdebug/" class="pre">phpstorm+xdebug配置</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://cdoco.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C-语言/">C 语言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php扩展/">php扩展</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/regex/">regex</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/gdb/" style="font-size: 15px;">gdb</a> <a href="/tags/php扩展/" style="font-size: 15px;">php扩展</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/lnmp/" style="font-size: 15px;">lnmp</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/xdebug/" style="font-size: 15px;">xdebug</a> <a href="/tags/phpstorm/" style="font-size: 15px;">phpstorm</a> <a href="/tags/c/" style="font-size: 15px;">c</a> <a href="/tags/ipc/" style="font-size: 15px;">ipc</a> <a href="/tags/regex/" style="font-size: 15px;">regex</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/11/07/learn-c/">C 语言基础入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/02/php-patterns/">PHP 设计模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/15/learn-regex-zh/">学习正则表达式的简单方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/15/php7-update/">PHP7 升级的那些事儿</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/10/php-ext-class/">PHP扩展实现类</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/23/debug-php-extension/">Debugging PHP Extensions</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/22/docker-basics/">docker常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/21/linux-ipc/">进程间通信（IPC）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/21/nginx-cut-log/">nginx 直接在配置文件中切割日志</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/21/nginx-variables/">nginx 内置变量</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">C &amp; Fish.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>